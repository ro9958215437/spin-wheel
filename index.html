<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spin & Jeeto</title>

<style>
body{
  margin:0;
  background:#fff3cd;
  font-family:Arial;
  text-align:center;
}

h1{
  margin:20px 0;
}

#wrapper{
  position:relative;
  width:300px;
  margin:0 auto;
}

#pointer{
  position:absolute;
  top:-10px;
  left:50%;
  transform:translateX(-50%);
  font-size:36px;
  color:#e60000;
  z-index:10;
}

canvas{
  display:block;
  margin:0 auto;
}

button{
  margin-top:18px;
  padding:15px 30px;
  font-size:18px;
  border:none;
  border-radius:10px;
  cursor:pointer;
}

#spinBtn{
  background:#28a745;
  color:#fff;
}

#spinBtn:disabled{
  background:#888;
}

#subscribeBtn{
  background:#ff0000;
  color:white;
}

#subscribeBtn:hover{
  background:#cc0000;
}

#note{
  margin-top:12px;
  font-size:14px;
  color:#333;
}

#result{
  margin-top:20px;
  font-size:22px;
  color:#d63384;
}
</style>
</head>

<body>

<h1>ЁЯОБ рдШреБрдорд╛рдУ рдФрд░ рдЗрдирд╛рдо рдЬреАрддреЛ ЁЯОБ</h1>

<div id="wrapper">
  <div id="pointer">ЁЯФ╗</div>
  <canvas id="wheel" width="300" height="300"></canvas>
</div>

<!-- SPIN BUTTON (LOCKED INITIALLY) -->
<button id="spinBtn" disabled>ЁЯФТ рдкрд╣рд▓реЗ Subscribe рдХрд░реЗрдВ</button>

<!-- SUBSCRIBE BUTTON -->
<br>
<button id="subscribeBtn">
  ЁЯФФ рд╣рдорд╛рд░реЗ YouTube рдЪреИрдирд▓ рдХреЛ Subscribe рдХрд░реЗрдВ
</button>

<div id="note">
  ЁЯУв Subscribe рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рд╡рд╛рдкрд╕ рдЖрдХрд░ Spin рдХрд░реЗрдВ
</div>

<p id="result"></p>

<audio id="spinSound"></audio>

<script>
/* ========= CONFIG ========= */
const gifts = [
  "тВ╣10 рдХреА рдЫреВрдЯ",
  "рдлреНрд░реА рдЪреЙрдХрд▓реЗрдЯ ЁЯНл",
  "тВ╣5 рдХреА рдЫреВрдЯ",
  "рдЕрдЧрд▓реА рдмрд╛рд░ рдлрд┐рд░ рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВ",
  "рдлреНрд░реА рдХреЛрд▓реНрдб рдбреНрд░рд┐рдВрдХ ЁЯед"
];

const colors = [
  "#ff6384",
  "#36a2eb",
  "#ffce56",
  "#4bc0c0",
  "#9966ff"
];
/* ========================= */

const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const center = 150;
const radius = 140;

let angle = -Math.PI/2; // TOP aligned
let spinning = false;

const slice = 2 * Math.PI / gifts.length;

/* ---------- DRAW WHEEL ---------- */
function drawWheel(){
  ctx.clearRect(0,0,300,300);

  for(let i=0;i<gifts.length;i++){
    const start = angle + i * slice;
    const end   = start + slice;

    ctx.beginPath();
    ctx.moveTo(center,center);
    ctx.arc(center,center,radius,start,end);
    ctx.fillStyle = colors[i % colors.length];
    ctx.fill();

    ctx.save();
    ctx.translate(center,center);
    ctx.rotate(start + slice/2);
    ctx.fillStyle="#fff";
    ctx.font="14px Arial";
    ctx.textAlign="center";
    ctx.fillText(gifts[i], radius/2, 5);
    ctx.restore();
  }
}

drawWheel();

/* ---------- CHECK SUBSCRIBE STATUS ---------- */
const spinBtn = document.getElementById("spinBtn");

if(localStorage.getItem("subscribed") === "yes"){
  spinBtn.disabled = false;
  spinBtn.innerText = "SPIN";
}

/* ---------- SUBSCRIBE BUTTON ---------- */
document.getElementById("subscribeBtn").onclick = function(){
  // mark as subscribed (client-side, legal)
  localStorage.setItem("subscribed","yes");

  // unlock spin
  spinBtn.disabled = false;
  spinBtn.innerText = "SPIN";

  // open YouTube channel
  window.open(
    "https://www.youtube.com/@R-digitalway?sub_confirmation=1",
    "_blank"
  );
};

/* ---------- SPIN ---------- */
spinBtn.onclick = () => {

  if(localStorage.getItem("spinned")){
    alert("тЭМ рдЖрдк рдкрд╣рд▓реЗ рд╣реА рд╕реНрдкрд┐рди рдХрд░ рдЪреБрдХреЗ рд╣реИрдВ");
    return;
  }
  if(spinning) return;
  spinning = true;

  const sound = document.getElementById("spinSound");
  sound.src = "https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3";
  sound.currentTime = 0;
  sound.play().catch(()=>{});

  const winIndex = Math.floor(Math.random() * gifts.length);

  const winSliceCenter = -Math.PI/2 + winIndex * slice + slice/2;
  const targetPosition = -Math.PI/2;
  const target = winSliceCenter - targetPosition - 6 * Math.PI;

  const startAngle = angle;
  const duration = 3000;
  let startTime = null;

  function animate(t){
    if(!startTime) startTime = t;
    const p = Math.min((t - startTime) / duration, 1);
    const ease = 1 - Math.pow(1 - p, 3);

    angle = startAngle - target * ease;
    drawWheel();

    if(p < 1){
      requestAnimationFrame(animate);
    } else {
      spinning = false;
      localStorage.setItem("spinned","yes");
      spinBtn.disabled = true;

      document.getElementById("result").innerHTML =
        "ЁЯОЙ рдЖрдкрдХреЛ рдорд┐рд▓рд╛: <b>" + gifts[winIndex] + "</b>";
    }
  }

  requestAnimationFrame(animate);
};
</script>

</body>
</html>
